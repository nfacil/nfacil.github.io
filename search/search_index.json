{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bem-vindo \u00e0 Documenta\u00e7\u00e3o do NF\u00e1cil","text":"<p>Documentos, artigos e tutoriais sobre o NF\u00e1cil est\u00e3o dispon\u00edveis nesta p\u00e1gina.</p> <p>Aqui voc\u00ea vai encontrar informa\u00e7\u00f5es sobre a ferramenta NF\u00e1cil, desenvolvida pela AFSouza, consultoria especializada no ERP Microsiga Protheus \u00ae da TOTVS.</p> <p>O NF\u00e1cil tem o objetivo de tornar mais simples e \u00e1gil a inclus\u00e3o dos documentos fiscais de entrada, ao receber o arquivo XML de uma nota fiscal eletr\u00f4nica, a rotina realizar\u00e1 a importa\u00e7\u00e3o e deixar\u00e1 o sistema apto a gerar a pr\u00e9-nota de entrada. Fazendo as amarra\u00e7\u00f5es e valida\u00e7\u00f5es necess\u00e1rias.</p> <p>Trata-se de uma ferramenta que executa diversos servi\u00e7os como: Leitura, importa\u00e7\u00e3o, valida\u00e7\u00e3o na SEFAZ, exporta dados do XML e gera pr\u00e9-nota de entrada de forma automatizada.</p> <p>O NF\u00e1cil foi desenvolvido especificamente para o Microsiga Protheus, portanto funciona de forma nativa, n\u00e3o sendo necess\u00e1ria integra\u00e7\u00e3o com outras ferramentas externas.</p> <p>Entre as principais funcionalidades, podemos listar as seguintes:</p> <ul> <li>100% integrado ao Protheus;</li> <li>Importa\u00e7\u00e3o de arquivos XML por e-mail, diret\u00f3rio ou diretamente da Sefaz, inclusive de forma automatizada;</li> <li>Gera\u00e7\u00e3o de Pr\u00e9-nota ou Documento de Entrada;</li> <li>Amarra\u00e7\u00e3o Produto x Fornecedor de forma simples e r\u00e1pida;</li> <li>Vincula\u00e7\u00e3o e associa\u00e7\u00e3o do Pedido de Compra a um XML emitido;</li> <li>Manifesta\u00e7\u00e3o autom\u00e1tica ou manual;</li> <li>Workflow de importa\u00e7\u00f5es e inconsist\u00eancias no processamento do XML;</li> <li>Instala\u00e7\u00e3o simples e r\u00e1pida.</li> </ul>"},{"location":"#atualizacao-do-nfacil","title":"Atualiza\u00e7\u00e3o do NF\u00e1cil","text":"<p>Para realizar a atualiza\u00e7\u00e3o do NF\u00e1cil siga as instru\u00e7\u00f5es disponibilizadas neste link.</p>"},{"location":"about/","title":"NF\u00e1cil - Documenta\u00e7\u00e3o, tutoriais e FAQ","text":"<p>Aqui voc\u00ea encontra informa\u00e7\u00f5es sobre a ferramenta NF\u00e1cil, desenvolvida pela AFSouza, consultoria especializada no ERP Microsiga Protheus \u00ae da TOTVS.</p> <p>D\u00favidas, sugest\u00f5es ou solicita\u00e7\u00e3o de suporte, nos envie um e-mail:</p> <p>Suporte NF\u00e1cil</p>"},{"location":"about/#versoes-do-protheus-suportadas-pelo-nfacil","title":"Vers\u00f5es do Protheus suportadas pelo NF\u00e1cil","text":"Vers\u00e3o Expira em Protheus 12.1.2210 30/06/2025 <sup>1</sup> Protheus 12.1.2310 30/06/2025 Protheus 12.1.2410 30/06/2026 <p>Microsiga Protheus, AdvPL, TL++, TOTVS s\u00e3o produtos e marcas registradas de propriedade da TOTVS S.A. Logotipos TOTVS e Microsiga s\u00e3o de propriedade da TOTVS S.A.</p> <ol> <li> <p>Garantia Estendida\u00a0\u21a9</p> </li> </ol>"},{"location":"dev-guide/","title":"Guia do Desenvolvedor","text":"<p>O NF\u00e1cil utiliza alguns Pontos de Entrada padr\u00e3o do Microsiga Protheus (R), que est\u00e3o dispon\u00edveis abaixo. Se alguns desses pontos est\u00e3o em uso no seu ambiente, os mesmos devem ser compatibilizados.</p>"},{"location":"dev-guide/#pontos-de-entrada-do-microsiga-protheus","title":"Pontos de Entrada do Microsiga Protheus","text":"<ul> <li>MATA103 - Documento Entrada</li> <li>MATA116 - Nota Conhecimento Frete</li> <li>MATA140 - Pr\u00e9-Nota Entrada</li> </ul> <p>O NF\u00e1cil disponibiliza uma s\u00e9rie de Pontos de Entrada, que podem ser utilizados para personaliza\u00e7\u00f5es espec\u00edficas, para atender necessidades do seu fluxo de trabalho. Os mesmos foram documentados conforme abaixo.</p>"},{"location":"dev-guide/#pontos-de-entrada-nfacil-importacao-xml","title":"Pontos de Entrada NF\u00e1cil - Importa\u00e7\u00e3o XML","text":"<ul> <li>Pontos de Entrada NF\u00e1cil - Importa\u00e7\u00e3o XML</li> </ul>"},{"location":"dev-guide/#pontos-de-entrada-nfacil-nfe","title":"Pontos de Entrada NF\u00e1cil NFe","text":"<ul> <li>Pontos de Entrada NF\u00e1cil NFe</li> </ul>"},{"location":"dev-guide/#pontos-de-entrada-nfacil-cte","title":"Pontos de Entrada NF\u00e1cil CTe","text":"<ul> <li>Pontos de Entrada NF\u00e1cil CTe</li> </ul>"},{"location":"dev-guide/#pontos-de-entrada-nfacil-nfse","title":"Pontos de Entrada NF\u00e1cil NFSe","text":"<ul> <li>Pontos de Entrada NF\u00e1cil NFSe</li> </ul>"},{"location":"dev-guide/mata103/","title":"Pontos de entrada da rotina MATA103","text":"<pre><code>/*/{Protheus.doc} MT100AGR\nO PE \u00e9 chamado ap\u00f3s a confirma\u00e7\u00e3o da NF, por\u00e9m fora da transa\u00e7\u00e3o.\n\n@description Isto foi feito pois clientes que utilizavam TTS e tinham interface\n             com o usu\u00e1rio no ponto MATA100 \"travavam\" os registros utilizados,\n             causando parada para outros usu\u00e1rios que estavam acessando a base.\n\n@obs Para verificar em que op\u00e7\u00e3o o programa est\u00e1, dever\u00e1 ser testado o conte\u00fado \n     das vari\u00e1veis INCLUI e ALTERA.\n     Quando estiver em modo de EXCLUS\u00c3O, ambas as vari\u00e1veis ficam com \n     conte\u00fado = .F.\n\n@author     AFSouza\n\n@type       function\n/*/\nUser Function MT100AGR()\n\nLocal aArea := GetArea()  \n\nIf INCLUI .Or. ALTERA\n\n    // Realiza a manifesta\u00e7\u00e3o\n    U_NFAC025(1)         \n\nElseIf !INCLUI .And. !ALTERA\n\n    // Atualiza o status do xml integrado\n    U_NFAC025(2)    \n\nEndIf\n\nRestArea(aArea)\n\nReturn Nil\n</code></pre> <pre><code>/*/{Protheus.doc} MT103EXC\nPE para valida\u00e7\u00e3o da exclus\u00e3o do documento de entrada.\n\n@author     AFSouza\n\n@return     lRet, logical, .T.\n@type       function\n/*/\nUser Function MT103EXC()\n\nLocal aArea := GetArea()\nLocal lRet  := .T.  \n\n// Atualiza o status do xml integrado\nU_NFAC025(2)    \n\nRestArea(aArea)\n\nReturn lRet\n</code></pre>"},{"location":"dev-guide/mata116/","title":"Pontos de entrada da rotina MATA116","text":"<pre><code>/*/{Protheus.doc} MT116AGR\nPonto de Entrada da Nota de Conhecimento de Frete respons\u00e1vel \npela inclus\u00e3o de notas de conhecimento de frete.\nAp\u00f3s a grava\u00e7\u00e3o da NF de conhecimento de frete fora da transa\u00e7\u00e3o.\n\n@author     AFSouza\n\n@type       function\n/*/\nUser Function MT116AGR() \n\n// Atualiza o status do xml CT-e integrado\nU_NFAC025(4)\n\nReturn Nil     \n</code></pre> <pre><code>/*/{Protheus.doc} M116ACOL\nEste ponto de entrada tem o objetivo de permitir a manipula\u00e7\u00e3o do \naCols que ser\u00e1 carregado para cada documento de entrada selecionado \npela rotina de Conhecimento de Frete.\n\n@description Possibilita identificar o documento que est\u00e1 sendo processado, \n             para adicionar campos customizados pr\u00e9-existentes no ambiente\n             com seus conte\u00fados preenchidos no aCols do conhecimento de frete.\n\n@author     AFSouza\n\n@type       function\n/*/\nUser Function M116ACOL()\n\n// Atualiza valores ICMS\nU_NFAC036I(ParamIXB)\n\nReturn                      \n</code></pre>"},{"location":"dev-guide/mata140/","title":"Pontos de entrada da rotina MATA140","text":"<pre><code>/*/{Protheus.doc} MT140SAI\nPE respons\u00e1vel por controlar a interface de um pr\u00e9-documento de entrada.\nPonto de entrada disparado antes do retorno da rotina ao browse.\nDessa forma, a tabela SF1 pode ser reposicionada antes do retorno \nao browse.\n\n@author     AFSouza\n\n@param      PARAMIXB[1], numeric, Numero da operacao\n            PARAMIXB[2], character, Numero Doc\n            PARAMIXB[3], character, Serie Doc\n            PARAMIXB[4], character, Fornecedor\n            PARAMIXB[5], character, Loja\n            PARAMIXB[6], character, Tipo\n            PARAMIXB[7], numeric, Opcao Confirmacao\n\n@type       function\n/*/\nUser Function MT140SAI()\n\n// Verifica se \u00e9 exclus\u00e3o\nIf PARAMIXB[1] == 5  \n\n    // Verifica se foi confirmado (Ok)\n    If PARAMIXB[7] == 1\n\n        // Atualiza o status do xml integrado\n        U_NFAC025(2)    \n\n    EndIf\n\nEndIf\n\nReturn\n</code></pre> <pre><code>/*/{Protheus.doc} MT140PC\nPE para o tratamento do par\u00e2metro MV_PCNFE \n(Nota Fiscal tem que ser amarrada a um Pedido de Compra ?)\n\n@author     AFSouza\n\n@return     lRetOk, logical, .T.\n@type       function\n/*/\nUser Function MT140PC()\n\nLocal lRetOk := .T.\n\n// Valida a obrigatoriedade da amarra\u00e7\u00e3o do pedido de venda\nlRetOk := U_NFAC025(3) \n\nReturn lRetOk\n</code></pre>"},{"location":"dev-guide/pontocte/","title":"Pontos de Entrada NF\u00e1cil CTe","text":"<p>Aqui voc\u00ea encontrar\u00e1 a documenta\u00e7\u00e3o para utiliza\u00e7\u00e3o dos Pontos de Entrada disponibilizados para a importa\u00e7\u00e3o e processamento de arquivos XML de Conhecimento de Frete Fiscal Eletr\u00f4nico.</p>"},{"location":"dev-guide/pontocte/#nfa015mn","title":"NFA015MN","text":"<ul> <li> <p>Descri\u00e7\u00e3o: Ponto de Entrada para incluir rotina no menu principal</p> </li> <li> <p>Sintaxe:</p> </li> </ul> <p><code>NFA015MN([PARAMIXB]) --&gt; aTempRot</code></p> <ul> <li>Par\u00e2metros:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio PARAMIXB Vetor Array aRotina contendo itens do Menu Sim <ul> <li>Retorno:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio aTempRot Array aRotina atualizado, com novos itens Sim <ul> <li>Exemplo:</li> </ul> <pre><code>User Function NFA015MN()\n\nLocal aTempRot := PARAMIXB[1]\n\nAAdd( aTempRot, { \"Pedido Compra\", \"MATA121()\", 0, 2 })\n\nReturn aTempRot\n</code></pre>"},{"location":"dev-guide/pontoimp/","title":"Pontos de Entrada NF\u00e1cil - Importador XML","text":"<p>Aqui voc\u00ea encontrar\u00e1 a documenta\u00e7\u00e3o para utiliza\u00e7\u00e3o dos Pontos de Entrada disponibilizados para o processamento da importa\u00e7\u00e3o de arquivos XML.</p>"},{"location":"dev-guide/pontoimp/#nfa012sm","title":"NFA012SM","text":"<ul> <li> <p>Descri\u00e7\u00e3o: Ponto de Entrada para verificar o CNPJ de outras empresas na tabela SM0, antigo sigamat.emp, atual SYS_COMPANY.</p> </li> <li> <p>Sintaxe:</p> </li> </ul> <p><code>NFA012SM([PARAMIXB]) --&gt; nPosEmp</code></p> <ul> <li>Par\u00e2metros:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio PARAMIXB Vetor Array contendo dados da empresa Sim <ul> <li>Retorno:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio nPosEmp N\u00famero \u00cdndice do registro localizado Sim <ul> <li>Exemplo:</li> </ul> <pre><code>User Function NFA012SM()\n\nLocal nPosLoc  := PARAMIXB[1]\nLocal cCGC := Alltrim(PARAMIXB[2]) \nLocal cMemoXml := PARAMIXB[3]\n\n/* Processamento Customizado */\n\nReturn nPosLoc\n</code></pre>"},{"location":"dev-guide/pontonfe/","title":"Pontos de Entrada NF\u00e1cil NFe","text":"<p>Aqui voc\u00ea encontrar\u00e1 a documenta\u00e7\u00e3o para utiliza\u00e7\u00e3o dos Pontos de Entrada disponibilizados para a importa\u00e7\u00e3o e processamento de arquivos XML de Nota Fiscal Eletr\u00f4nica.</p>"},{"location":"dev-guide/pontonfe/#nfa003mn","title":"NFA003MN","text":"<ul> <li> <p>Descri\u00e7\u00e3o: Ponto de Entrada para incluir rotina no menu principal</p> </li> <li> <p>Sintaxe:</p> </li> </ul> <p><code>NFA003MN([PARAMIXB]) --&gt; aTempRot</code></p> <ul> <li>Par\u00e2metros:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio PARAMIXB Vetor Array aRotina contendo itens do Menu Sim <ul> <li>Retorno:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio aTempRot Array aRotina atualizado, com novos itens Sim <ul> <li>Exemplo:</li> </ul> <pre><code>User Function NFA003MN()\n\nLocal aTempRot := PARAMIXB[1]\n\nAAdd( aTempRot, { \"Pedido Compra\", \"MATA121()\", 0, 2 })\n\nReturn aTempRot\n</code></pre>"},{"location":"dev-guide/pontonfs/","title":"Pontos de Entrada NF\u00e1cil NFse","text":"<p>Aqui voc\u00ea encontrar\u00e1 a documenta\u00e7\u00e3o para utiliza\u00e7\u00e3o dos Pontos de Entrada disponibilizados para a importa\u00e7\u00e3o e processamento de arquivos XML de Nota Fiscal de Servi\u00e7os Eletr\u00f4nica.</p>"},{"location":"dev-guide/pontonfs/#nfa039mn","title":"NFA039MN","text":"<ul> <li> <p>Descri\u00e7\u00e3o: Ponto de Entrada para incluir rotina no menu principal</p> </li> <li> <p>Sintaxe:</p> </li> </ul> <p><code>NFA039MN([PARAMIXB]) --&gt; aTempRot</code></p> <ul> <li>Par\u00e2metros:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio PARAMIXB Vetor Array aRotina contendo itens do Menu Sim <ul> <li>Retorno:</li> </ul> Nome Tipo Descri\u00e7\u00e3o Obrigat\u00f3rio aTempRot Array aRotina atualizado, com novos itens Sim <ul> <li>Exemplo:</li> </ul> <pre><code>User Function NFA039MN()\n\nLocal aTempRot := PARAMIXB[1]\n\nAAdd( aTempRot, { \"Pedido Compra\", \"MATA121()\", 0, 2 })\n\nReturn aTempRot\n</code></pre>"},{"location":"user-guide/","title":"Guia do Usu\u00e1rio","text":"<p>Aqui voc\u00ea ir\u00e1 encontrar informa\u00e7\u00f5es para o uso do NF\u00e1cil no seu dia a dia, bem como configura\u00e7\u00f5es um pouco mais detalhadas, normalmente necess\u00e1rias quando da instala\u00e7\u00e3o ou atualiza\u00e7\u00e3o do NF\u00e1cil.</p>"},{"location":"user-guide/#atualizacao","title":"Atualiza\u00e7\u00e3o","text":"<p>Veja como realizar a atualiza\u00e7\u00e3o do NF\u00e1cil passo a passo, direto ao ponto.</p> <ul> <li>Atualiza\u00e7\u00e3o</li> </ul>"},{"location":"user-guide/#configurando-os-servicos-web","title":"Configurando os Servi\u00e7os Web","text":"<p>Um dos requisitos para que o NF\u00e1cil realize a comunica\u00e7\u00e3o com a Sefaz, para baixar, validar e efetuar manifesta\u00e7\u00f5es dos documentos recebidos s\u00e3o os Servi\u00e7os Web dispon\u00edveis para estas opera\u00e7\u00f5es.</p> <p>Este cadastro j\u00e1 est\u00e1 dispon\u00edvel no NF\u00e1cil e pode ser atualizado de forma autom\u00e1tica ou manualmente.</p> <ul> <li>Configurando os Servi\u00e7os Web</li> </ul>"},{"location":"user-guide/update/","title":"Update","text":"<p>Aqui voc\u00ea encontrar\u00e1 um passo a passo para auxiliar na atualiza\u00e7\u00e3o do NF\u00e1cil.</p> <p>O primeiro passo \u00e9 baixar a vers\u00e3o atualizada do patch do NF\u00e1cil, correspondente ao Release do Protheus em uso no seu ambiente.</p> <p>\u00c9 recomendado que este procedimento seja realizado em ambiente de Homologa\u00e7\u00e3o e validado antes de ser implementado em ambiente de produ\u00e7\u00e3o.</p> <p>Verifique qual a vers\u00e3o correta para seu ambiente e realize o download atrav\u00e9s  dos links abaixo.</p> <p>Patch de atualiza\u00e7\u00e3o NF\u00e1cil para Protheus 12.1.2210</p> <p>Patch de atualiza\u00e7\u00e3o NF\u00e1cil para Protheus 12.1.2310</p> <p>Patch de atualiza\u00e7\u00e3o NF\u00e1cil para Protheus 12.1.2410</p> <p>Com o arquivo em m\u00e3os, efetue a aplica\u00e7\u00e3o do patch e em seguida execute a rotina U_NFACUPDN para compatibiliza\u00e7\u00e3o do ambiente.</p> <p></p> <p>Ser\u00e1 apresentada a tela de avisos da atualiza\u00e7\u00e3o, com as recomenda\u00e7\u00f5es, que devem ser observadas para evitar problemas ap\u00f3s uma atualiza\u00e7\u00e3o mal sucedida!</p> <p></p> <p>Selecionar as empresas que ser\u00e3o atualizadas.</p> <p></p> <p>A rotina ir\u00e1 realizar uma verifica\u00e7\u00e3o das tabelas em uso pelo NF\u00e1cil e/ou pelo Sistema.</p> <p></p> <p>Verifique se as tabelas est\u00e3o em uso pelo NF\u00e1cil, se houver alguma nova tabela, observe se a mesma est\u00e1 como \"Tabela Dispon\u00edvel\" ou \"Tabela utilizada - SISTEMA\", neste \u00faltimo caso informe uma outra tabela, preferencialmente seguindo o padr\u00e3o do NF\u00e1cil \"Z?Z\" e execute a an\u00e1lise novamente.</p> <p>Se estiver tudo certo vai ser apresentada a tela abaixo.</p> <p></p> <p>Aguarde a finaliza\u00e7\u00e3o da atualiza\u00e7\u00e3o.</p> <p></p> <p>Com a finaliza\u00e7\u00e3o da atualiza\u00e7\u00e3o ser\u00e1 apresentada a tela para consultar e/ou gravar o log do processamento realizado.</p> <p></p> <p>Atualiza\u00e7\u00e3o coclu\u00edda!</p> <p></p>"},{"location":"user-guide/webservice/","title":"Webservice","text":"<p>Para que os endere\u00e7os (URL) dos Servi\u00e7os Web da Sefaz para NFe e CTe sejam atualizados \u00e9 necess\u00e1rio que seja realizado o procedimento abaixo:</p> <ul> <li>Acesse o caminho:</li> </ul> <p>NFacil &gt; Outras A\u00e7\u00f5es &gt; Configura\u00e7\u00f5es &gt; Empresa</p> <p></p> <ul> <li>Acesse o bot\u00e3o \"Web Services\":</li> </ul> <p></p> <ul> <li>Em seguida acesse o caminho:</li> </ul> <p>Outras A\u00e7\u00f5es &gt; Carga/Atualiza</p> <p></p>"}]}